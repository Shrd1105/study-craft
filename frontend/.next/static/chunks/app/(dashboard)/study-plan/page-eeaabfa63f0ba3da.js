(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[488],{922:function(e,s,a){Promise.resolve().then(a.bind(a,241))},241:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return O}});var t=a(7437),l=a(2265),r=a(2381),n=a(279),d=a(9820),i=a(641);function c(e){let{plan:s}=e;return(0,t.jsxs)(d.Zb,{className:"w-full bg-white border-2 border-black rounded-xl",children:[(0,t.jsxs)(d.Ol,{className:"border-b-2 border-black p-4 sm:p-6",children:[(0,t.jsxs)(d.ll,{className:"text-xl sm:text-2xl font-semibold text-gray-800 break-words",children:["Study Plan for ",s.overview.subject]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 text-sm sm:text-base text-gray-600",children:[(0,t.jsxs)("span",{children:["Duration: ",s.overview.duration]}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"|"}),(0,t.jsxs)("span",{children:["Exam Date: ",s.overview.examDate]})]})]}),(0,t.jsx)(d.aY,{className:"p-4 sm:p-6",children:(0,t.jsxs)(i.x,{className:"h-[calc(100vh-200px)] sm:h-[calc(100vh-220px)] w-full pr-2 sm:pr-4",children:[s.weeklyPlans.map((e,s)=>(0,t.jsxs)("div",{className:"mb-8 sm:mb-12 last:mb-0",children:[(0,t.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800 border-b pb-2",children:e.week}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Goals:"}),(0,t.jsx)("ul",{className:"list-disc pl-4 sm:pl-5 space-y-1 text-sm sm:text-base",children:e.goals.map((e,s)=>(0,t.jsx)("li",{className:"text-gray-600",children:e},s))})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Daily Schedule:"}),e.dailyTasks.map((e,s)=>(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("h5",{className:"font-medium text-gray-600 text-sm sm:text-base",children:[e.day," (",e.duration,")"]}),(0,t.jsx)("ul",{className:"list-disc pl-4 sm:pl-5 space-y-1 text-sm sm:text-base",children:e.tasks.map((e,s)=>(0,t.jsx)("li",{className:"text-gray-600",children:e},s))})]},s))]})]},s)),(0,t.jsxs)("div",{className:"mt-6 sm:mt-8",children:[(0,t.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800 border-b pb-2",children:"Study Tips & Recommendations"}),(0,t.jsx)("ul",{className:"list-disc pl-4 sm:pl-5 space-y-2 text-sm sm:text-base",children:s.recommendations.map((e,s)=>(0,t.jsx)("li",{className:"text-gray-600",children:e},s))})]})]})})]})}var o=a(1817),m=a(3340),x=a(3227),u=a(605),h=a(1047),p=a(7811),f=a(3448),y=a(653);function b(e){let{className:s,classNames:a,showOutsideDays:l=!0,...n}=e;return(0,t.jsx)(p._W,{showOutsideDays:l,className:(0,f.cn)("p-3 bg-white rounded-lg border-2 border-black",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,f.cn)((0,r.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,f.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===n.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,f.cn)((0,r.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:s}=e;return(0,t.jsx)(y.wyc,{className:(0,f.cn)("h-4 w-4",s)})},IconRight:e=>{let{className:s}=e;return(0,t.jsx)(y.XCv,{className:(0,f.cn)("h-4 w-4",s)})}},...n})}b.displayName="Calendar";var v=a(32);let j=v.fC,g=v.xz;v.ee;let N=l.forwardRef((e,s)=>{let{className:a,align:l="center",sideOffset:r=4,...n}=e;return(0,t.jsx)(v.h_,{children:(0,t.jsx)(v.VY,{ref:s,align:l,sideOffset:r,className:(0,f.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",a),...n})})});N.displayName=v.VY.displayName;var w=a(7107);function S(e){let{onPlanGenerated:s}=e,[a,d]=(0,l.useState)(""),[i,p]=(0,l.useState)(),[y,v]=(0,l.useState)(null),[S,_]=(0,l.useState)(!1),{toast:P}=(0,m.pm)(),{data:k}=(0,u.useSession)(),[E,C]=(0,l.useState)(null),A=async e=>{var t,l,r,n,c;if(e.preventDefault(),C(null),v(null),!(null==k?void 0:null===(t=k.user)||void 0===t?void 0:t.id)){P({variant:"error",title:"Authentication Required",description:"You must be logged in to generate a study plan"});return}if(!a.trim()){C("Please enter a subject");return}if(!i){C("Please select an exam date");return}_(!0);try{let e=await x.x.createStudyPlan(k.user.id,a.trim(),i.toISOString().split("T")[0]);if("PLAN_EXISTS"===e.error){C(e.message||"A study plan for this subject already exists");let s=document.getElementById("stored-plans");s&&s.scrollIntoView({behavior:"smooth"});return}if(e.success&&e.plan)v(e.plan),d(""),p(void 0),P({variant:"success",title:"Plan Generated",description:"Study plan generated successfully"}),setTimeout(()=>{s(e.plan)},100);else throw Error(e.error||"Failed to generate plan")}catch(e){if(console.error("Error creating plan:",e),(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.error)==="PLAN_EXISTS"){C(e.response.data.message||"A study plan for this subject already exists");let s=document.getElementById("stored-plans");s&&s.scrollIntoView({behavior:"smooth"})}else P({variant:"error",title:"Error",description:(null==e?void 0:null===(c=e.response)||void 0===c?void 0:null===(n=c.data)||void 0===n?void 0:n.message)||e.message||"Failed to create study plan"})}finally{_(!1)}};return(0,t.jsx)("div",{className:"w-full bg-[#F2EDE0] p-4 sm:p-6 border-2 border-b-4 border-r-4 border-black rounded-xl",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("form",{onSubmit:A,className:"space-y-4 sm:space-y-6 mb-6 sm:mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(n.I,{type:"text",placeholder:"Enter your study topic...",value:a,onChange:e=>{d(e.target.value),C(null)},className:(0,f.cn)("bg-white border-2 border-black text-gray-900 placeholder-gray-500 text-base sm:text-lg p-6 rounded-xl h-auto",E&&"border-red-500 focus-visible:ring-red-500")}),E&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:E})]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)(j,{children:[(0,t.jsx)(g,{asChild:!0,children:(0,t.jsxs)(r.z,{variant:"outline",className:(0,f.cn)("w-full h-full justify-start text-left font-normal bg-white border-2 border-black text-base sm:text-lg p-6 rounded-xl",!i&&"text-gray-500"),children:[(0,t.jsx)(h.Z,{className:"mr-2 h-5 w-5"}),i?(0,w.WU)(i,"PPP"):(0,t.jsx)("span",{children:"dd-mm-yyyy"})]})}),(0,t.jsx)(N,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(b,{mode:"single",selected:i,onSelect:p,initialFocus:!0,disabled:e=>e<new Date})})]})})]}),(0,t.jsx)("div",{className:"flex justify-center w-full",children:(0,t.jsxs)(r.z,{type:"submit",className:"w-full sm:w-auto flex justify-center items-center text-base sm:text-lg py-6 px-8 rounded-xl",disabled:S||!a.trim()||!i,children:[S?(0,t.jsx)(o.Z,{className:"mr-2 h-4 sm:h-5 w-4 sm:w-5 animate-spin"}):null,S?"Generating Your Plan...":"Create Study Plan"]})})]}),y&&(0,t.jsxs)("div",{className:"mt-6 sm:mt-8 bg-white rounded-xl border-2 border-black p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Generated Study Plan"}),(0,t.jsx)(c,{plan:y})]})]})})}var _=a(9174),P=a(4730);let k=P.fC,E=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(P.ck,{ref:s,className:(0,f.cn)("border-b border-[var(--border)]",a),...l})});E.displayName="AccordionItem";let C=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsx)(P.h4,{className:"flex",children:(0,t.jsxs)(P.xz,{ref:s,className:(0,f.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:text-[var(--foreground)] text-[var(--muted-foreground)] [&[data-state=open]>svg]:rotate-180",a),...r,children:[l,(0,t.jsx)(y.v4q,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});C.displayName=P.xz.displayName;let A=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsx)(P.VY,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,t.jsx)("div",{className:(0,f.cn)("pb-4 pt-0",a),children:l})})});A.displayName=P.VY.displayName;var D=a(767);function I(e){let{plan:s,onDelete:a}=e,{toast:n}=(0,m.pm)(),[i,c]=(0,l.useState)(!1),o=async()=>{try{c(!0),await x.x.deleteStudyPlan(s._id),a(s._id),n({variant:"success",title:"Success",description:"Study plan deleted successfully"})}catch(e){n({variant:"error",title:"Error",description:"Failed to delete study plan"})}finally{c(!1)}};return(0,t.jsxs)(d.Zb,{className:"w-full mt-4 sm:mt-8",children:[(0,t.jsxs)(d.Ol,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,t.jsxs)(d.ll,{className:"text-xl sm:text-2xl font-bold break-words",children:["Study Plan for ",s.overview.subject]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,t.jsx)(_.C,{variant:"outline",className:"text-xs sm:text-sm",children:s.overview.duration}),(0,t.jsxs)(_.C,{variant:"outline",className:"text-xs sm:text-sm",children:["Exam: ",s.overview.examDate]}),(0,t.jsx)(_.C,{variant:s.isActive?"default":"secondary",className:"text-xs sm:text-sm",children:s.isActive?"Active":"Completed"})]})]}),(0,t.jsxs)(D.aR,{children:[(0,t.jsx)(D.vW,{asChild:!0,children:(0,t.jsx)(r.z,{variant:"destructive",disabled:i,className:"w-full sm:w-auto hover:bg-red-500",children:"Delete Plan"})}),(0,t.jsxs)(D._T,{className:"w-[95vw] max-w-md sm:w-full",children:[(0,t.jsxs)(D.fY,{children:[(0,t.jsx)(D.f$,{children:"Are you sure?"}),(0,t.jsx)(D.yT,{children:"This action cannot be undone. This will permanently delete your study plan."})]}),(0,t.jsxs)(D.xo,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,t.jsx)(D.le,{className:"w-full sm:w-auto",children:"Cancel"}),(0,t.jsx)(D.OL,{onClick:o,className:"w-full sm:w-auto hover:bg-red-500",children:"Delete"})]})]})]})]}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)(k,{type:"single",collapsible:!0,className:"w-full",children:[s.weeklyPlans.map((e,s)=>(0,t.jsxs)(E,{value:"week-".concat(s),children:[(0,t.jsx)(C,{className:"text-base sm:text-lg font-semibold",children:e.week}),(0,t.jsx)(A,{children:(0,t.jsxs)("div",{className:"space-y-4 text-sm sm:text-base",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Goals:"}),(0,t.jsx)("ul",{className:"list-disc pl-4 sm:pl-5 space-y-1",children:e.goals.map((e,s)=>(0,t.jsx)("li",{className:"break-words",children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Daily Tasks:"}),e.dailyTasks.map((e,s)=>(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h5",{className:"font-medium",children:[e.day," (",e.duration,")"]}),(0,t.jsx)("ul",{className:"list-disc pl-4 sm:pl-5 space-y-1",children:e.tasks.map((e,s)=>(0,t.jsx)("li",{className:"break-words",children:e},s))})]},s))]})]})})]},s)),(0,t.jsxs)(E,{value:"recommendations",children:[(0,t.jsx)(C,{className:"text-base sm:text-lg font-semibold",children:"Recommendations"}),(0,t.jsx)(A,{children:(0,t.jsx)("ul",{className:"list-disc pl-4 sm:pl-5 space-y-1 text-sm sm:text-base",children:s.recommendations.map((e,s)=>(0,t.jsx)("li",{className:"break-words",children:e},s))})})]})]})})]})}var T=a(1593),Y=a(9140),F=a(2813);function O(){var e;let{data:s}=(0,u.useSession)(),[a,r]=(0,l.useState)([]),[n,d]=(0,l.useState)(!0),[i,c]=(0,l.useState)(1),{toast:o}=(0,m.pm)(),h=(0,l.useCallback)(async()=>{var e;if(null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.id)try{d(!0);let e=await x.x.getStudyPlan(s.user.id);if(e.error){console.error("API returned error:",e.error),o({variant:"error",title:"Error",description:"Failed to fetch study plans. Please try again."}),r([]);return}if(e.plans&&Array.isArray(e.plans)){let s=e.plans.sort((e,s)=>s._id.localeCompare(e._id));r(s)}else console.error("Invalid plans data structure:",e),r([])}catch(e){console.error("Error fetching stored plans:",e),o({variant:"error",title:"Error",description:"Failed to fetch study plans. Please try again."}),r([])}finally{d(!1)}},[null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.id,o]);(0,l.useEffect)(()=>{h()},[h]);let p=async e=>{try{let s=await x.x.deleteStudyPlan(e);if(s.success)r(s=>s.filter(s=>s._id!==e)),o({variant:"success",title:"Success",description:s.message||"Study plan deactivated successfully."});else throw Error(s.message||"Failed to deactivate plan")}catch(e){console.error("Error deactivating plan:",e),o({variant:"error",title:"Error",description:e instanceof Error?e.message:"Failed to deactivate study plan. Please try again."})}},f=Math.ceil(a.length/5),y=(i-1)*5,b=a.slice(y,y+5);return(0,t.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 sm:mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2 sm:mb-0",children:"Study Plan Generator"}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Create and manage your study plans"})})]}),(0,t.jsx)("div",{className:"w-full max-w-full sm:max-w-10xl",children:(0,t.jsx)(S,{onPlanGenerated:()=>{setTimeout(()=>{h()},500)}})}),(0,t.jsxs)("div",{id:"stored-plans",className:"mt-8 sm:mt-12",children:[(0,t.jsx)(T.Z,{className:"my-6 sm:my-8"}),(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"Your Study Plans"}),n?(0,t.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,t.jsx)(Y.O,{className:"h-[150px] sm:h-[200px] w-full"}),(0,t.jsx)(Y.O,{className:"h-[150px] sm:h-[200px] w-full"})]}):a.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-4 sm:space-y-6",children:b.map(e=>(0,t.jsx)(I,{plan:e,onDelete:p},e._id))}),f>1&&(0,t.jsx)(F.z,{currentPage:i,totalPages:f,onPageChange:c})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("p",{children:"You haven't created any study plans yet."}),(0,t.jsx)("p",{className:"mt-2",children:"Use the form above to create your first study plan!"})]})]})]})}}},function(e){e.O(0,[310,137,605,314,663,343,611,998,971,117,744],function(){return e(e.s=922)}),_N_E=e.O()}]);