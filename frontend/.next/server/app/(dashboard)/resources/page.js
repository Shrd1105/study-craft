(()=>{var e={};e.id=71,e.ids=[71],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},51741:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o}),r(19203),r(57659),r(90996),r(14695);var t=r(30170),a=r(45002),l=r(83876),n=r.n(l),i=r(66299),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(s,c);let o=["",{children:["(dashboard)",{children:["resources",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,19203)),"D:\\Shraddha\\ClgProj\\study-craft\\frontend\\src\\app\\(dashboard)\\resources\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,57659)),"D:\\Shraddha\\ClgProj\\study-craft\\frontend\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,14695)),"D:\\Shraddha\\ClgProj\\study-craft\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Shraddha\\ClgProj\\study-craft\\frontend\\src\\app\\(dashboard)\\resources\\page.tsx"],m="/(dashboard)/resources/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/resources/page",pathname:"/resources",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},37316:(e,s,r)=>{Promise.resolve().then(r.bind(r,37022))},37022:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>N});var t=r(97247),a=r(28964),l=r(28852),n=r(85426),i=r(55757),c=r(97059),o=r(8749),d=r(49835),m=r(40677);function u({onCreateResources:e}){let[s,r]=(0,a.useState)(""),[u,x]=(0,a.useState)(!1),[p]=(0,a.useState)([]),[h,f]=(0,a.useState)(null),{toast:g}=(0,d.pm)(),j=async t=>{if(t.preventDefault(),f(null),!s.trim()){f("Please enter a subject");return}x(!0);try{await e(s.trim()),r(""),g({variant:"success",title:"Success",description:"Resources generated successfully"})}catch(e){"object"==typeof e&&null!==e&&"response"in e&&"object"==typeof e.response&&null!==e.response&&"data"in e.response&&"object"==typeof e.response.data&&null!==e.response.data&&"error"in e.response.data&&"RESOURCE_EXISTS"===e.response.data.error&&"message"in e.response.data&&f(e.response.data.message)}finally{x(!1)}};return t.jsx("div",{className:"w-full bg-[#F2EDE0] p-4 sm:p-6 border-2 border-b-4 border-r-4 border-black rounded-xl",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("form",{onSubmit:j,className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx(n.I,{type:"text",placeholder:"Enter a topic to find learning resources...",value:s,onChange:e=>{r(e.target.value),f(null)},className:(0,m.cn)("bg-white border-2 border-black text-gray-900 placeholder-gray-500 text-base sm:text-lg p-6 rounded-xl h-auto",h&&"border-red-500 focus-visible:ring-red-500")}),h&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:h})]}),t.jsx(l.z,{type:"submit",disabled:u||!s.trim(),className:"w-full sm:w-auto flex justify-center items-center text-base sm:text-lg py-8 mt-1 px-8 rounded-xl",children:u?(0,t.jsxs)(t.Fragment,{children:[t.jsx(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Resources"})]}),!h&&p.length>0&&t.jsx(c.x,{className:"h-[calc(100vh-400px)] sm:h-[calc(100vh-300px)] w-full",children:t.jsx("div",{className:"grid grid-cols-1 gap-6 sm:gap-10",children:p.map((e,s)=>(0,t.jsxs)(i.Zb,{className:"bg-white border-2 border-black border-b-4 border-r-4",children:[(0,t.jsxs)(i.Ol,{className:"p-4 sm:p-6",children:[t.jsx(i.ll,{className:"text-lg sm:text-xl text-gray-800",children:e.title}),t.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:e.type})]}),(0,t.jsxs)(i.aY,{className:"p-4 sm:p-6",children:[t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:e.description}),t.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-[#7fb236] hover:text-[#6f9826] hover:underline text-sm sm:text-base",children:"Learn More â†’"})]})]},s))})})]})})}var x=r(87597),p=r(69899);let h=(0,r(26323).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var f=r(9287);function g({resource:e,onDelete:s}){let{toast:r}=(0,d.pm)(),[n,c]=(0,a.useState)(!1),o=async()=>{try{c(!0),await f.x.deleteCuratedResources(e._id),s(e._id),r({variant:"success",title:"Success",description:"Resources deleted successfully"})}catch{r({variant:"error",title:"Error",description:"Failed to delete resources"})}finally{c(!1)}},m=e.lastUpdated?new Date(e.lastUpdated).toLocaleDateString():"Date not available";return(0,t.jsxs)(i.Zb,{className:"w-full mt-4 sm:mt-8",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.ll,{className:"text-xl sm:text-2xl font-bold break-words",children:["Resources for ",e.topic]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[t.jsx(x.C,{variant:"outline",className:"text-sm",children:m}),(0,t.jsxs)(x.C,{variant:"outline",className:"text-sm",children:[e.resources.length," Resources"]})]})]}),(0,t.jsxs)(p.aR,{children:[t.jsx(p.vW,{asChild:!0,children:t.jsx(l.z,{variant:"destructive",disabled:n,className:"w-full sm:w-auto hover:bg-red-500",children:"Delete Resources"})}),(0,t.jsxs)(p._T,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(p.fY,{children:[t.jsx(p.f$,{children:"Are you sure?"}),t.jsx(p.yT,{children:"This action cannot be undone. This will permanently delete these curated resources."})]}),(0,t.jsxs)(p.xo,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[t.jsx(p.le,{className:"w-full sm:w-auto",children:"Cancel"}),t.jsx(p.OL,{onClick:o,className:"w-full sm:w-auto hover:bg-red-500",children:"Delete"})]})]})]})]}),t.jsx(i.aY,{children:t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e.resources.map(e=>(0,t.jsxs)(i.Zb,{className:"bg-muted",children:[t.jsx(i.Ol,{className:"p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[t.jsx(i.ll,{className:"text-base sm:text-lg font-semibold break-words",children:e.title}),t.jsx(x.C,{className:"text-xs sm:text-sm",children:e.type})]})}),(0,t.jsxs)(i.aY,{className:"space-y-4 p-4 sm:p-6",children:[t.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground break-words",children:e.description}),(0,t.jsxs)(l.z,{variant:"outline",className:"w-full text-sm sm:text-base py-2 sm:py-4",onClick:()=>window.open(e.link,"_blank"),children:["Visit Resource ",t.jsx(h,{className:"ml-2 h-3 w-3 sm:h-4 sm:w-4"})]})]})]},e._id))})})]})}var j=r(16171),b=r(8732),y=r(19898),v=r(48523);function N(){let{data:e}=(0,y.useSession)(),[s,r]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(1),{toast:o}=(0,d.pm)(),m=(0,a.useCallback)(async()=>{if(e?.user?.id)try{let s=await f.x.getCuratedResources(e.user.id);if(console.log("Fetched resources data:",s),s.error){console.error("API returned error:",s.error),o({variant:"error",title:"Error",description:"Failed to fetch resources. Please try again."}),r([]);return}if(s.resources&&Array.isArray(s.resources)){let e=s.resources.filter(e=>e&&e._id&&e.topic&&Array.isArray(e.resources));console.log("Valid resources:",e),r(e)}else console.error("Invalid resources data structure:",s),r([])}catch(e){console.error("Error fetching resources:",e),o({variant:"error",title:"Error",description:"Failed to fetch resources. Please try again."}),r([])}finally{n(!1)}},[e?.user?.id,o]),x=e=>{r(s=>s.filter(s=>s._id!==e)),o({variant:"success",title:"Success",description:"Resource deleted successfully."})},p=async s=>{if(e?.user?.id)try{await f.x.createCuratedResources(e.user.id,s),o({variant:"success",title:"Success",description:"Resources created successfully."}),m()}catch(e){if(console.error("Error creating resources:",e),e&&"object"==typeof e&&"status"in e&&(429===e.status||413===e.status)){let s=Math.ceil((e.retryAfter||60)/60);o({variant:"error",title:"Rate Limit Exceeded",description:`Please try again in ${s} minute${s>1?"s":""}. Our AI service has reached its limit.`});return}if(e&&"object"==typeof e&&"response"in e&&e.response?.data?.error==="RESOURCE_EXISTS"){o({variant:"default",title:"Resources Already Exist",description:e.response.data.message||"You already have resources for this subject."});let s=document.getElementById("stored-resources");s&&s.scrollIntoView({behavior:"smooth"});return}o({variant:"error",title:"Error",description:e instanceof Error?e.message:"Failed to create resources. Please try again."})}},h=Math.ceil(s.length/5),N=(i-1)*5,w=s.slice(N,N+5);return(0,t.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-0 mb-6 sm:mb-8",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Resource Curator"}),t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Find and manage learning resources"})})]}),t.jsx("div",{className:"w-full max-w-10xl mx-auto",children:t.jsx(u,{onCreateResources:p})}),l?(0,t.jsxs)("div",{className:"mt-8 sm:mt-12",children:[t.jsx(j.Z,{className:"my-6 sm:my-8"}),t.jsx(b.O,{className:"h-6 sm:h-8 w-36 sm:w-48 mb-4 sm:mb-6"}),(0,t.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[t.jsx(b.O,{className:"h-[150px] sm:h-[200px] w-full"}),t.jsx(b.O,{className:"h-[150px] sm:h-[200px] w-full"})]})]}):(0,t.jsxs)("div",{id:"stored-resources",className:"mt-8 sm:mt-12",children:[t.jsx(j.Z,{className:"my-6 sm:my-8"}),t.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"Your Curated Resources"}),s.length>0?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"space-y-4 sm:space-y-6",children:w.map(e=>t.jsx(g,{resource:e,onDelete:x},e._id))}),h>1&&t.jsx(v.z,{currentPage:i,totalPages:h,onPageChange:c})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("p",{children:"You haven't curated any resources yet."}),t.jsx("p",{className:"mt-2",children:"Use the form above to get personalized learning resources!"})]})]})]})}},19203:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(45347).createProxy)(String.raw`D:\Shraddha\ClgProj\study-craft\frontend\src\app\(dashboard)\resources\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[379,110,564,468,65,236],()=>r(51741));module.exports=t})();